<html>

<head>
	<meta charset="UTF-8">

	<title>SCOOP Dashboard</title>
	<meta name="description" content="The SCOOP Visualization Dashboard.">

	<link rel="stylesheet" href="lib/foundation.min.css">
	<link rel="stylesheet" href="fonts/foundation-icons.css">
	<link rel="stylesheet" href="css/auxilary.css">
</head>

<body style="height: 100%">

	<div id="auth" class="reveal-modal" data-reveal>
		<form class="text-center">
			<h2>Login</h2>
			<label>Username
				<input id='identity' type="text" name="identity" placeholder="Your supplied username.">
			</label>
			<label>Password
				<input id='password' type="password" name="password" placeholder="Your supplied password.">
			</label>
			<input class="button radius" type="submit" value="Log In">
		</form>
	</div>

	<div class="off-canvas-wrap" data-offcanvas style="height: 100%">
		<div class="inner-wrap" style="height: 100%">
			<nav class="tab-bar">
				<section class="left-small">
					<a href="#" class="left-off-canvas-toggle menu-icon"><span></span></a>
				</section>

				<section class="middle tab-bar-section">
					<h1 id="title">Loading...</h1>
				</section>

			</nav>

			<aside class="left-off-canvas-menu" style="height: 100%">
				<img src="Hover%20bear.jpeg">
				<ul id="sidebar" class="off-canvas-list">
					<li>
						<label>Queries</label>
					</li>
					<div id="queries">
					</div>
					<li class='text-center'><a id="queryList" href="#/queries"><i class='fi-results'></i> List...</a></li>
					<li>
						<label>Reports</label>
					</li>
					<div id="reports">
					</div>
				</ul>
			</aside>

			<section id="main" class="main-section" style="overflow: auto; height: 100%"></section>

			<a class="exit-off-canvas"></a>
		</div>
	</div>



	<script src="lib/jquery-2.1.1.js"></script>
	<script src="lib/jquery.cookie.js"></script>
	<script src="lib/modernizr.js"></script>
	<script src="lib/foundation.min.js"></script>
	<script src="lib/d3.v3.js"></script>
	<script src="lib/routie.js"></script>

	<!-- Visualizer stuff -->
	<script src="js/Api.js"></script>
	<script src="js/Sidebar.js"></script>
	<script src="js/Vizualizer.js"></script>
	<script src="js/Router.js"></script>
	<script>
		$(document).ready(function(){
			// Start Foundation
			$(document).foundation({
				reveal: { close_on_background_click: false }
			});
			// Initialize the API.
			document.api = new Api();
			// Begin Authentication.
			$('#auth').foundation('reveal', 'open').submit(function (event) {
				event.preventDefault();
				console.log("Submitting");
				// Authenicate
				var opts = {
					identity: $('#auth #identity').val(),
					password: $('#auth #password').val()
				};
				document.api.auth(opts)
					.done(function() {
						console.log("Auth successful!");
						$('#auth').foundation('reveal', 'close');
						// Auth Successful
						document.visualizer = new Visualizer();
						document.sidebar = new Sidebar();
						document.router = new Router();
					})
					.error(function () {
						console.log(arguments)
						// Auth failed.
						throw "Authentication failed.";
					});
			});
		});
	</script>
</body>

</html>